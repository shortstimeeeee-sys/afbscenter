# í•˜ë“œì½”ë”© ì œê±° ë¦¬íŒ©í† ë§ ê³„íš

## âœ… ì•ˆì „í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥í•œ í•­ëª©ë“¤

### 1. **SettingsController ê¸°ë³¸ê°’ â†’ application.properties**

**í˜„ì¬ ìƒíƒœ**: 
- `createAndSaveDefaultSettings()`ì—ì„œ í•˜ë“œì½”ë”©
- `createTempSettings()`ì—ì„œ í•˜ë“œì½”ë”©
- `getSettings()`ì—ì„œ null ì²´í¬ í›„ í•˜ë“œì½”ë”©ëœ ê¸°ë³¸ê°’ ì‚¬ìš© (54-60ì¤„)

**ë³€ê²½ ë°©ë²•**:
```java
@Value("${settings.default.center-name:AFBS ì•¼êµ¬ì„¼í„°}")
private String defaultCenterName;

@Value("${settings.default.phone:02-1234-5678}")
private String defaultPhone;

@Value("${settings.default.session-duration:60}")
private Integer defaultSessionDuration;
// ... ë“±ë“±
```

**ì•ˆì „ì„±**: âœ… **ì™„ì „íˆ ì•ˆì „**
- SettingsëŠ” ì´ë¯¸ DBì— ì €ì¥/ì¡°íšŒë˜ëŠ” êµ¬ì¡°
- ê¸°ë³¸ê°’ì€ DBì— ê°’ì´ ì—†ì„ ë•Œë§Œ ì‚¬ìš©ë¨
- application.propertiesì— ê¸°ë³¸ê°’ì„ ì„¤ì •í•˜ë©´ ë™ì¼í•˜ê²Œ ì‘ë™

---

### 2. **ê²°ì œ ë°©ë²• ê¸°ë³¸ê°’ â†’ Settings DB ë˜ëŠ” application.properties**

**í˜„ì¬ ìƒíƒœ**:
- `PaymentMethod.CASH`ê°€ 5ê³³ì— í•˜ë“œì½”ë”©
- ìë™ ìƒì„±ë˜ëŠ” ê²°ì œì—ë§Œ ì‚¬ìš©ë¨

**ë³€ê²½ ë°©ë²•**:
```java
// Settingsì— paymentDefaultMethod í•„ë“œ ì¶”ê°€
// ë˜ëŠ” application.propertiesì— ì„¤ì •

@Value("${payment.default.method:CASH}")
private String defaultPaymentMethod;

// ì‚¬ìš© ì‹œ
payment.setPaymentMethod(Payment.PaymentMethod.valueOf(defaultPaymentMethod));
```

**ì•ˆì „ì„±**: âœ… **ì•ˆì „**
- ìë™ ìƒì„±ë˜ëŠ” ê²°ì œì—ë§Œ ì˜í–¥
- ê¸°ì¡´ ìˆ˜ë™ ìƒì„± ê²°ì œëŠ” ì˜í–¥ ì—†ìŒ
- ê¸°ë³¸ê°’ì„ CASHë¡œ ìœ ì§€í•˜ë©´ ë™ì¼í•˜ê²Œ ì‘ë™

---

### 3. **totalCount/usageCount ê¸°ë³¸ê°’ 10 â†’ ìƒìˆ˜ í´ë˜ìŠ¤ ë˜ëŠ” Settings**

**í˜„ì¬ ìƒíƒœ**:
- `totalCount = 10` (10ê³³ ì´ìƒ)
- `usageCount = 10` (ì—¬ëŸ¬ ê³³)
- null ì²´í¬ í›„ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©

**ë³€ê²½ ë°©ë²•**:
```java
// ìƒìˆ˜ í´ë˜ìŠ¤ ìƒì„±
public class ProductDefaults {
    public static final int DEFAULT_TOTAL_COUNT = 10;
    public static final int DEFAULT_USAGE_COUNT = 10;
}

// ì‚¬ìš© ì‹œ
if (totalCount == null || totalCount <= 0) {
    totalCount = ProductDefaults.DEFAULT_TOTAL_COUNT;
}
```

**ì•ˆì „ì„±**: âœ… **ì™„ì „íˆ ì•ˆì „**
- null ì²´í¬ í›„ì—ë§Œ ì‚¬ìš©ë˜ëŠ” ë°©ì–´ì  ì½”ë“œ
- ìƒìˆ˜ë¡œ ë¶„ë¦¬í•´ë„ ë™ì¼í•œ ê°’ ì‚¬ìš©
- ê¸°ëŠ¥ ë³€ê²½ ì—†ìŒ

---

### 4. **ì˜ˆì•½ ì‹œê°„ ê¸°ë³¸ê°’ 60ë¶„ â†’ Settings DB**

**í˜„ì¬ ìƒíƒœ**:
- `AnalyticsController.java`ì—ì„œ `60ë¶„` í•˜ë“œì½”ë”©
- ìš´ì˜ ì‹œê°„ì´ ì—†ì„ ë•Œë§Œ ì‚¬ìš©

**ë³€ê²½ ë°©ë²•**:
```java
// Settingsì—ì„œ defaultSessionDuration ê°€ì ¸ì˜¤ê¸°
Settings settings = getSettings();
int defaultMinutes = settings.getDefaultSessionDuration() != null 
    ? settings.getDefaultSessionDuration() 
    : 60;
```

**ì•ˆì „ì„±**: âœ… **ì•ˆì „**
- Settingsì— ì´ë¯¸ `defaultSessionDuration` í•„ë“œ ì¡´ì¬
- DBì—ì„œ ê°€ì ¸ì˜¤ë©´ ë” ì •í™•í•œ ê°’ ì‚¬ìš© ê°€ëŠ¥
- ê¸°ë³¸ê°’ 60ì€ ìœ ì§€ ê°€ëŠ¥

---

## âš ï¸ ì£¼ì˜ê°€ í•„ìš”í•œ í•­ëª©ë“¤

### 5. **ì‹œì„¤ ì´ˆê¸°í™” ë°ì´í„°**

**í˜„ì¬ ìƒíƒœ**:
- `DatabaseMigration.java`ì—ì„œ ì‚¬í•˜ì /ì—°ì‚°ì  í•˜ë“œì½”ë”©
- ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì‹œ ìë™ ìƒì„±

**ë³€ê²½ ë°©ë²•**:
- SQL ìŠ¤í¬ë¦½íŠ¸ë¡œ ë¶„ë¦¬
- ë˜ëŠ” ì„¤ì • íŒŒì¼ë¡œ ë¶„ë¦¬

**ì•ˆì „ì„±**: âš ï¸ **ì£¼ì˜ í•„ìš”**
- ì´ˆê¸° ë°ì´í„°ì´ë¯€ë¡œ ì²« ì‹¤í–‰ ì‹œì—ë§Œ ì˜í–¥
- ê¸°ì¡´ DBì—ëŠ” ì´ë¯¸ ë°ì´í„°ê°€ ìˆì„ ìˆ˜ ìˆìŒ
- ë³€ê²½ ì‹œ ê¸°ì¡´ ë°ì´í„°ì™€ ì¶©ëŒ ê°€ëŠ¥ì„± í™•ì¸ í•„ìš”

---

### 6. **ëª¨ë¸ ê¸°ë³¸ê°’ (Facility, Booking)**

**í˜„ì¬ ìƒíƒœ**:
```java
private Branch branch = Branch.SAHA; // ê¸°ë³¸ê°’
```

**ë³€ê²½ ë°©ë²•**:
- ê·¸ëŒ€ë¡œ ìœ ì§€ ê¶Œì¥ (ëª¨ë¸ ë ˆë²¨ ê¸°ë³¸ê°’ì€ ì •ìƒì ì¸ íŒ¨í„´)
- ë˜ëŠ” @PrePersistì—ì„œ ì²˜ë¦¬

**ì•ˆì „ì„±**: âœ… **í˜„ì¬ ìƒíƒœ ìœ ì§€ ê¶Œì¥**
- ëª¨ë¸ ê¸°ë³¸ê°’ì€ ì •ìƒì ì¸ íŒ¨í„´
- ë³€ê²½ ë¶ˆí•„ìš”

---

## ğŸ“‹ ë¦¬íŒ©í† ë§ ìš°ì„ ìˆœìœ„

### 1ë‹¨ê³„: ì¦‰ì‹œ ì•ˆì „í•˜ê²Œ ë³€ê²½ ê°€ëŠ¥
1. âœ… **SettingsController ê¸°ë³¸ê°’** â†’ `application.properties`
2. âœ… **totalCount/usageCount** â†’ ìƒìˆ˜ í´ë˜ìŠ¤
3. âœ… **ì˜ˆì•½ ì‹œê°„ ê¸°ë³¸ê°’** â†’ Settings DB ì‚¬ìš©

### 2ë‹¨ê³„: ì‹ ì¤‘í•˜ê²Œ ë³€ê²½
4. âš ï¸ **ê²°ì œ ë°©ë²• ê¸°ë³¸ê°’** â†’ Settings DB ë˜ëŠ” properties
5. âš ï¸ **ì‹œì„¤ ì´ˆê¸°í™”** â†’ SQL ìŠ¤í¬ë¦½íŠ¸ ë¶„ë¦¬

### 3ë‹¨ê³„: ë³€ê²½ ë¶ˆí•„ìš”
6. âœ… **ëª¨ë¸ ê¸°ë³¸ê°’** â†’ í˜„ì¬ ìƒíƒœ ìœ ì§€

---

## ğŸ” ê¸°ëŠ¥ ì˜í–¥ ë¶„ì„

### âœ… ì˜í–¥ ì—†ëŠ” ë³€ê²½
- **Settings ê¸°ë³¸ê°’**: DBì— ê°’ì´ ìˆìœ¼ë©´ DB ê°’ ì‚¬ìš©, ì—†ìœ¼ë©´ properties ê¸°ë³¸ê°’ ì‚¬ìš©
- **ìƒìˆ˜ ë¶„ë¦¬**: ê°’ì€ ë™ì¼, ìœ„ì¹˜ë§Œ ë³€ê²½
- **ì˜ˆì•½ ì‹œê°„**: Settingsì— ì´ë¯¸ í•„ë“œ ì¡´ì¬, í™œìš©ë§Œ í•˜ë©´ ë¨

### âš ï¸ ì£¼ì˜ í•„ìš”í•œ ë³€ê²½
- **ê²°ì œ ë°©ë²•**: ìë™ ìƒì„± ê²°ì œì—ë§Œ ì˜í–¥, ìˆ˜ë™ ìƒì„±ì€ ì˜í–¥ ì—†ìŒ
- **ì‹œì„¤ ì´ˆê¸°í™”**: ì²« ì‹¤í–‰ ì‹œì—ë§Œ ì˜í–¥, ê¸°ì¡´ DBëŠ” ì˜í–¥ ì—†ìŒ

---

## ğŸ’¡ ê¶Œì¥ ì ‘ê·¼ ë°©ë²•

### ë‹¨ê³„ë³„ ë¦¬íŒ©í† ë§

1. **1ë‹¨ê³„: ìƒìˆ˜ í´ë˜ìŠ¤ ìƒì„±** (ê°€ì¥ ì•ˆì „)
   ```java
   // ProductDefaults.java ìƒì„±
   // totalCount = 10 â†’ ProductDefaults.DEFAULT_TOTAL_COUNT
   ```

2. **2ë‹¨ê³„: application.properties ì¶”ê°€** (ì•ˆì „)
   ```properties
   # Settings ê¸°ë³¸ê°’
   settings.default.center-name=AFBS ì•¼êµ¬ì„¼í„°
   settings.default.session-duration=60
   # ...
   ```

3. **3ë‹¨ê³„: Settings DB í™œìš©** (ì£¼ì˜)
   ```java
   // ê²°ì œ ë°©ë²•, ì˜ˆì•½ ì‹œê°„ ë“±ì„ Settingsì—ì„œ ê°€ì ¸ì˜¤ê¸°
   // Settingsê°€ ì—†ì„ ë•Œë§Œ ê¸°ë³¸ê°’ ì‚¬ìš©
   ```

---

## âœ… ê²°ë¡ 

**ëŒ€ë¶€ë¶„ì˜ í•˜ë“œì½”ë”©ì€ ì•ˆì „í•˜ê²Œ ì œê±° ê°€ëŠ¥í•©ë‹ˆë‹¤!**

- âœ… **Settings ê´€ë ¨**: DB ê°’ ìš°ì„ , ì—†ìœ¼ë©´ properties ê¸°ë³¸ê°’
- âœ… **ìƒìˆ˜ ê°’ë“¤**: ìƒìˆ˜ í´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•´ë„ ë™ì¼í•˜ê²Œ ì‘ë™
- âœ… **ê¸°ë³¸ê°’ ë¡œì§**: null ì²´í¬ í›„ ì‚¬ìš©í•˜ë¯€ë¡œ ì•ˆì „
- âš ï¸ **ì´ˆê¸° ë°ì´í„°**: ê¸°ì¡´ DB í™•ì¸ í›„ ë³€ê²½

**ê¸°ëŠ¥ ì˜í–¥ ì—†ìŒ**: ë°©ì–´ì  ì½”ë”© íŒ¨í„´(null ì²´í¬)ì´ ì´ë¯¸ ì ìš©ë˜ì–´ ìˆì–´, DB ê°’ì´ë‚˜ ì„¤ì •ê°’ìœ¼ë¡œ ë³€ê²½í•´ë„ ê¸°ì¡´ ë¡œì§ì´ ê·¸ëŒ€ë¡œ ì‘ë™í•©ë‹ˆë‹¤.
